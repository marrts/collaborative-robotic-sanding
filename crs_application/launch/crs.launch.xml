<?xml version="1.0"?>
<launch>
	<let name="state_machine_file" value="$(find-pkg-share crs_application)/resources/crs_process.scxml"/>
	
  <let name="group_ns" value=""/>
	<group>		
		<push-ros-namespace namespace="$(var group_ns)"/>
		
		<include file="$(find-pkg-share crs_application)/launch/load_preview_robot_model.launch.xml">
		</include>		

    <include file="$(find-pkg-share crs_application)/launch/load_robot_model.launch.xml">
    </include>
		
		<include file="$(find-pkg-share crs_support)/launch/environment_launch.launch.py">
		</include>
		
		<node pkg="crs_application" exec="crs_application_node" name="crs_main" output="screen">
			<param name="state_machine_file" value="$(var state_machine_file)"/>
		</node>		
		
		<!-- rviz -->
		<let name="rviz_config" value="$(find-pkg-share crs_application)/resources/crs.rviz"/>
		<node pkg="rviz2" exec="rviz2" launch-prefix="xterm -e" args="-d $(var rviz_config) --ros-args --log-level ERROR" output="log"/>
	</group>
</launch>
